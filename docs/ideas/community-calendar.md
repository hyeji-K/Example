# 커뮤니티 & 캘린더 확장 아이디어

## 반응(리액션) 기능
- **테이블 구조 제안**: `project_reactions(id, project_id, user_id, reaction_type, created_at)`.
- **목표**: 프로젝트별로 "좋아요", "기대돼요" 등 다양한 감정 표현을 저장해 모두가 열기를 공유할 수 있게 함.
- **설계 포인트**
  - `reaction_type`에는 👍, 🔥, 😍 등 아이콘/라벨을 미리 정의하고 확장 가능하게 둔다.
  - 한 사용자/익명 토큰이 같은 프로젝트에 같은 반응을 여러 번 누르지 못하도록 Unique 제약(`project_id`, `user_id`, `reaction_type`).
  - API에서는 프로젝트별 집계 결과(예: 기대돼요 120명)를 빠르게 제공하도록 캐싱 또는 카운터 컬럼을 고려.

## Google 캘린더 연동
- **사용자 동의 흐름**: D-Day 생성/조회가 끝난 뒤 "Google 캘린더에 일정 추가할까요?" 질문을 던지고 OAuth2로 `calendar.events` 권한을 획득.
- **데이터 모델**: `calendar_events(id, project_id, user_id, calendar_id, event_id, created_at, status)` 테이블을 별도로 두어 어떤 사용자가 어떤 프로젝트를 캘린더에 추가했는지 추적.
- **이벤트 포맷**
  - 제목: `<영화명> 개봉 D-Day`
  - 시작/종료: 개봉일 기준 하루 종일(all-day) 이벤트.
  - 설명: 영화 소개, 주요 출연진, 서비스 링크 및 "함께 기다리는 사람 수" 등 커뮤니티 정보를 포함.
- **오류 처리**
  - 토큰 만료나 사용자가 권한을 취소하면 재인증 요청 문구를 안내.
  - Google API 실패 시 로그를 남기고 "나중에 다시 시도해 주세요" 응답을 전송.

핵심 D-Day 기능이 안정화되면 위 아이디어를 백로그로 옮겨 순차적으로 구현할 수 있습니다.
## MCP 툴 온/오프 개인화
- **문제 인식**: 사용자가 영화/드라마 외에도 다양한 MCP(예: 상영관 검색, OTT 일정, 도서 발매 등)를 붙이고 싶어하지만, 모든 툴이 항상 노출되면 오버헤드와 혼란이 커짐.
- **아이디어**
  - GNB의 `설정` 탭에서 MCP 툴 목록을 토글할 수 있도록 UI/상태를 제공한다.
  - 현재 활성화된 툴 리스트를 `/chat/stream` 요청 payload에 포함시키면, 백엔드 `run_chat_orchestrator_events`가 해당 툴만 LangChain에 바인딩함.
  - Supabase Auth 도입 이후에는 사용자별 선호/권한 테이블을 만들어, 로그인 사용자가 각 MCP를 on/off할 수 있고, 특정 툴은 유료/특정 커뮤니티에만 공개하는 식으로 확장 가능.
- **기대 효과**: 사용자가 관심 있는 정보 소스만 선택해 "맞춤형" 대기실을 만들 수 있고, 새로운 MCP 툴을 붙일 때에도 기본 토글만 추가하면 되므로 확장성과 운영 편의가 높아진다.

